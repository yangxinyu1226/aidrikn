import db_logic
import sys

sys.stdout.reconfigure(encoding='utf-8')

# 1. 获取所有产品ID和名称
products_data = db_logic.get_all_products()
product_name_to_id = {name: pid for pid, name, _ in products_data}

# 2. 解析 aipei.csv 内容
aipei_content = """产品名称: 金萱椰奶寒天晶球 

产品名称: 金萱椰奶寒天晶球 

口味: 奶香浓郁，带有椰子清甜 

茶底: 金萱乌龙 (推测) 

小料: 寒天晶球 

口感: 顺滑，带有寒天晶球的Q弹 

咖啡因: 有 (金萱乌龙茶底含有咖啡因) 

甜度: 可调整 (含果糖) 

适用场景/心情: 休闲小憩，喜爱奶茶和椰子风味时


产品名称: 金萱椰奶烧仙草 

产品名称: 金萱椰奶烧仙草 

口味: 奶香与仙草的清凉，带有椰子的香甜 

茶底: 金萱乌龙 (推测) 

小料: 烧仙草 

口感: 浓郁顺滑，烧仙草软糯 

咖啡因: 有 (金萱乌龙茶底含有咖啡因) 

甜度: 可调整 (含蜂蜜) 

适用场景/心情: 甜品替代，夏日解暑


产品名称: 金萱燕麦奶奥利奥碎 

产品名称: 金萱燕麦奶奥利奥碎 

口味: 燕麦奶的谷物香与奥利奥的巧克力甜 

茶底: 金萱乌龙 (推测) 

小料: 奥利奥碎 

口感: 丝滑，带有奥利奥碎的酥脆 

咖啡因: 有 (金萱乌龙茶底含有咖啡因) 

甜度: 可调整 (含果糖) 

适用场景/心情: 喜爱燕麦奶和甜食，下午茶


产品名称: 金萱燕麦奶寒天晶球珍珠 

产品名称: 金萱燕麦奶寒天晶球珍珠 

口味: 燕麦奶香，带有黑糖的焦香甜 

茶底: 金萱乌龙 (推测) 

小料: 寒天晶球，珍珠 

口感: 顺滑，带有寒天晶球和珍珠的Q弹 

咖啡因: 有 (金萱乌龙茶底含有咖啡因) 

甜度: 可调整 (含黑糖糖浆) 

适用场景/心情: 喜爱燕麦奶和多重口感，日常饮用


产品名称: 金萱燕麦奶红豆奥利奥碎 

产品名称: 金萱燕麦奶红豆奥利奥碎 

口味: 燕麦奶香，红豆的沙甜与奥利奥的巧克力味 

茶底: 金萱乌龙 (推测) 

小料: 红豆，奥利奥碎 

口感: 浓郁，带有红豆的沙糯和奥利奥碎的酥脆 

咖啡因: 有 (金萱乌龙茶底含有咖啡因) 

甜度: 可调整 (含黑糖糖浆) 

适用场景/心情: 喜爱甜点饮品，饱足感需求


产品名称: 金萱牛奶寒天晶球奥利奥碎 

产品名称: 金萱牛奶寒天晶球奥利奥碎 

口味: 纯牛奶的香醇与奥利奥的巧克力甜 

茶底: 金萱乌龙 (推测) 

小料: 寒天晶球，奥利奥碎 

口感: 丝滑，带有寒天晶球的Q弹和奥利奥碎的酥脆 

咖啡因: 有 (金萱乌龙茶底含有咖啡因) 

甜度: 可调整 (含蜂蜜) 

适用场景/心情: 经典牛奶口味，追求丰富口感


产品名称: 金萱牛奶红豆 

产品名称: 金萱牛奶红豆 

口味: 纯牛奶的香醇与红豆的香甜 

茶底: 金萱乌龙 (推测) 

小料: 红豆，椰果 

口感: 浓郁，带有红豆的沙糯和椰果的Q弹 

咖啡因: 有 (金萱乌龙茶底含有咖啡因) 

甜度: 可调整 (含果糖) 

适用场景/心情: 经典搭配，暖心饮品


产品名称: 锡兰厚乳奥利奥碎 

产品名称: 锡兰厚乳奥利奥碎 

口味: 厚乳的醇厚与奥利奥的巧克力甜 

茶底: 锡兰红茶 

小料: 奥利奥碎 

口感: 浓郁顺滑，带有奥利奥碎的酥脆 

咖啡因: 有 (锡兰红茶底含有咖啡因) 

甜度: 可调整 (含果糖) 

适用场景/心情: 喜爱浓郁奶味和巧克力，下午茶


产品名称: 锡兰厚乳珍珠 

产品名称: 锡兰厚乳珍珠 

口味: 厚乳的醇厚与黑糖的焦香甜 

茶底: 锡兰红茶 

小料: 黑糖珍珠 

口感: 浓郁顺滑，带有珍珠的Q弹 

咖啡因: 有 (锡兰红茶底含有咖啡因) 

甜度: 可调整 (含蜂蜜) 

适用场景/心情: 经典奶茶口味，饱足感需求


产品名称: 锡兰奶奶盖粉 

产品名称: 锡兰奶奶盖粉 

口味: 鲜牛奶的清甜与奶盖的咸香 

茶底: 锡兰红茶 

小料: 奶盖粉，寒天晶球 (推测，因为成分中有奶盖粉和寒天晶球) 

口感: 清爽顺滑，奶盖绵密，带有寒天晶球的Q弹 

咖啡因: 有 (锡兰红茶底含有咖啡因) 

甜度: 可调整 (含果糖) 

适用场景/心情: 喜爱奶盖风味，清爽解渴


产品名称: 锡兰奶奶盖粉寒天晶球 

产品名称: 锡兰奶奶盖粉寒天晶球 

口味: 鲜牛奶的清甜与奶盖的咸香 

茶底: 锡兰红茶 

小料: 奶盖粉，寒天晶球 

口感: 清爽顺滑，奶盖绵密，带有寒天晶球的Q弹 

咖啡因: 有 (锡兰红茶底含有咖啡因) 

甜度: 可调整 (含蜂蜜) 

适用场景/心情: 喜爱奶盖风味，追求多重口感


产品名称: 锡兰奶寒天晶球烧仙草 

产品名称: 锡兰奶寒天晶球烧仙草 

口味: 鲜牛奶的香醇与仙草的清凉 

茶底: 锡兰红茶 

小料: 寒天晶球，烧仙草 

口感: 顺滑，带有寒天晶球的Q弹和烧仙草的软糯 

咖啡因: 有 (锡兰红茶底含有咖啡因) 

甜度: 可调整 (含蜂蜜) 

适用场景/心情: 甜品替代，夏日解暑


产品名称: 锡兰奶布丁椰果 

产品名称: 锡兰奶布丁椰果 

口味: 鲜牛奶的香醇与布丁的蛋奶香甜 

茶底: 锡兰红茶 

小料: 布丁，椰果 

口感: 顺滑，带有布丁的Q弹和椰果的脆爽 

咖啡因: 有 (锡兰红茶底含有咖啡因) 

甜度: 可调整 (含蜂蜜) 

适用场景/心情: 喜爱布丁和椰果，作为甜点饮品


产品名称: 锡兰奶椰果 

产品名称: 锡兰奶椰果 

口味: 鲜牛奶的香醇与椰果的清甜 

茶底: 锡兰红茶 

小料: 椰果 

口感: 清爽顺滑，带有椰果的脆爽 

咖啡因: 有 (锡兰红茶底含有咖啡因) 

甜度: 可调整 (含蜂蜜) 

适用场景/心情: 清爽解渴，日常饮用


产品名称: 锡兰椰奶寒天晶球奶盖粉 

产品名称: 锡兰椰奶寒天晶球奶盖粉 

口味: 椰奶的浓郁香甜与奶盖的咸香 

茶底: 锡兰红茶 

小料: 寒天晶球，奶盖粉 

口感: 浓郁顺滑，奶盖绵密，带有寒天晶球的Q弹 

咖啡因: 有 (锡兰红茶底含有咖啡因) 

甜度: 可调整 (含蜂蜜) 

适用场景/心情: 喜爱椰奶和奶盖，追求丰富口感


产品名称: 锡兰牛奶奥利奥碎 

产品名称: 锡兰牛奶奥利奥碎 

口味: 纯牛奶的香醇与奥利奥的巧克力甜 

茶底: 锡兰红茶 

小料: 奥利奥碎 

口感: 丝滑，带有奥利奥碎的酥脆 

咖啡因: 有 (锡兰红茶底含有咖啡因) 

甜度: 可调整 (含黑糖糖浆) 

适用场景/心情: 经典牛奶口味，喜爱巧克力


产品名称: 锡兰牛奶奶盖粉珍珠 

产品名称: 锡兰牛奶奶盖粉珍珠 

口味: 纯牛奶的香醇与奶盖的咸香 

茶底: 锡兰红茶 

小料: 奶盖粉，黑糖珍珠 

口感: 顺滑，奶盖绵密，带有珍珠的Q弹 

咖啡因: 有 (锡兰红茶底含有咖啡因) 

甜度: 可调整 (含黑糖糖浆) 

适用场景/心情: 喜爱奶盖和珍珠，日常饮用


产品名称: 锡兰牛奶布丁 

产品名称: 锡兰牛奶布丁 

口味: 纯牛奶的香醇与布丁的蛋奶香甜 

茶底: 锡兰红茶 

小料: 布丁，烧仙草 (推测，成分中有布丁和烧仙草) 

口感: 顺滑，带有布丁的Q弹和烧仙草的软糯 

咖啡因: 有 (锡兰红茶底含有咖啡因) 

甜度: 可调整 (含黑糖糖浆) 

适用场景/心情: 喜爱布丁，作为甜点饮品


产品名称: 锡兰牛奶烧仙草寒天晶球 

产品名称: 锡兰牛奶烧仙草寒天晶球 

口味: 纯牛奶的香醇与仙草的清凉 

茶底: 锡兰红茶 

小料: 烧仙草，寒天晶球 

口感: 顺滑，带有烧仙草的软糯和寒天晶球的Q弹 

咖啡因: 有 (锡兰红茶底含有咖啡因) 

甜度: 可调整 (含蜂蜜) 

适用场景/心情: 甜品替代，夏日解暑


产品名称: 阿萨姆厚乳布丁红豆 

产品名称: 阿萨姆厚乳布丁红豆 

口味: 厚乳的醇厚与红豆的香甜 

茶底: 阿萨姆红茶 

小料: 布丁，红豆 

口感: 浓郁顺滑，带有布丁的Q弹和红豆的沙糯 

咖啡因: 有 (阿萨姆红茶底含有咖啡因) 

甜度: 可调整 (含蜂蜜) 

适用场景/心情: 喜爱浓郁奶味和红豆，饱足感需求


产品名称: 阿萨姆奶珍珠椰果 

产品名称: 阿萨姆奶珍珠椰果 

口味: 鲜牛奶的香醇与黑糖的焦香甜 

茶底: 阿萨姆红茶 

小料: 黑糖珍珠，椰果 

口感: 顺滑，带有珍珠的Q弹和椰果的脆爽 

咖啡因: 有 (阿萨姆红茶底含有咖啡因) 

甜度: 可调整 (含黑糖糖浆) 

适用场景/心情: 经典搭配，日常饮用


产品名称: 阿萨姆椰奶奶盖粉椰果 

产品名称: 阿萨姆椰奶奶盖粉椰果 

口味: 椰奶的浓郁香甜与奶盖的咸香 

茶底: 阿萨姆红茶 

小料: 奶盖粉，椰果 

口感: 浓郁顺滑，奶盖绵密，带有椰果的脆爽 

咖啡因: 有 (阿萨姆红茶底含有咖啡因) 

甜度: 可调整 (含黑糖糖浆) 

适用场景/心情: 喜爱椰奶和奶盖，追求丰富口感

产品名称: 阿萨姆椰奶布丁奥利奥碎 

产品名称: 阿萨姆椰奶布丁奥利奥碎 

口味: 椰奶的浓郁香甜与奥利奥的巧克力甜 

茶底: 阿萨姆红茶 

小料: 布丁，奥利奥碎 

口感: 浓郁顺滑，带有布丁的Q弹和奥利奥碎的酥脆 

咖啡因: 有 (阿萨姆红茶底含有咖啡因) 

甜度: 可调整 (含黑糖糖浆) 

适用场景/心情: 喜爱椰奶和巧克力，作为甜点饮品


产品名称: 阿萨姆椰奶烧仙草 

产品名称: 阿萨姆椰奶烧仙草 

口味: 椰奶的浓郁香甜与仙草的清凉 

茶底: 阿萨姆红茶 

小料: 烧仙草 

口感: 浓郁顺滑，烧仙草软糯 

咖啡因: 有 (阿萨姆红茶底含有咖啡因) 

甜度: 可调整 (含蜂蜜) 

适用场景/心情: 甜品替代，夏日解暑


产品名称: 阿萨姆燕麦奶烧仙草 

产品名称: 阿萨姆燕麦奶烧仙草 

口味: 燕麦奶的谷物香与仙草的清凉 

茶底: 阿萨姆红茶 

小料: 烧仙草，寒天晶球 

口感: 顺滑，带有烧仙草的软糯和寒天晶球的Q弹 

咖啡因: 有 (阿萨姆红茶底含有咖啡因) 

甜度: 可调整 (含果糖) 

适用场景/心情: 喜爱燕麦奶，甜品替代


产品名称: 阿萨姆燕麦奶烧仙草椰果 

产品名称: 阿萨姆燕麦奶烧仙草椰果 

口味: 燕麦奶的谷物香与仙草和椰果的清甜 

茶底: 阿萨姆红茶 

小料: 烧仙草，椰果 

口感: 顺滑，带有烧仙草的软糯和椰果的脆爽 

咖啡因: 有 (阿萨姆红茶底含有咖啡因) 

甜度: 可调整 (含果糖) 

适用场景/心情: 喜爱燕麦奶和多重口感，夏日解暑


产品名称: 阿萨姆牛奶烧仙草 

产品名称: 阿萨姆牛奶烧仙草 

口味: 纯牛奶的香醇与仙草的清凉 

茶底: 阿萨姆红茶 

小料: 烧仙草 

口感: 顺滑，烧仙草软糯 

咖啡因: 有 (阿萨姆红茶底含有咖啡因) 

甜度: 可调整 (含果糖) 

适用场景/心情: 甜品替代，日常饮用"""

current_product_id = None
for line in aipei_content.splitlines():
    line = line.strip()
    if not line:
        continue

    if line.startswith("产品名称:"):
        product_name = line.replace("产品名称:", "").strip()
        if product_name in product_name_to_id:
            current_product_id = product_name_to_id[product_name]
            print(f"正在处理产品: {product_name} (ID: {current_product_id})")
        else:
            print(f"警告: 未找到产品 '{product_name}' 的ID，跳过。")
            current_product_id = None
    elif current_product_id is not None and ":" in line:
        try:
            attribute_name, attribute_value = line.split(":", 1)
            attribute_name = attribute_name.strip()
            attribute_value = attribute_value.strip()
            success, message = db_logic.add_product_attribute(current_product_id, attribute_name, attribute_value)
            if success:
                print(f"  - 添加属性: {attribute_name}: {attribute_value}")
            else:
                print(f"  - 错误添加属性 {attribute_name}: {attribute_value} - {message}")
        except Exception as e:
            print(f"  - 解析行 '{line}' 失败: {e}")

print("\n属性导入完成。")